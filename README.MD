# E-Learning (Projeto de POO)

## Sobre o Projeto
Este projeto foi feito em `Python` como um exerc√≠cio pr√°tico de **Programa√ß√£o Orientada a Objetos**. √â uma simula√ß√£o de console completa, demonstra a intera√ß√£o entre diferentes objetos e usu√°rios (Alunos e Instrutores) em um ambiente de cursos online.

## Funcionalidades

O sistema foi desenvolvido para cobrir os requisitos essenciais de uma plataforma de E-learning, com foco na l√≥gica de backend e na intera√ß√£o entre os objetos.

### Implementadas

* **Course Creation and Management:** Instrutores podem criar, atualizar e gerenciar seus pr√≥prios cursos online.
* **Content Access Control:** A l√≥gica garante que instrutores s√≥ possam gerenciar seus pr√≥prios cursos e que alunos s√≥ interajam com os cursos nos quais est√£o matriculados.
* **Student Enrollment and Tracking:** O sistema gerencia as matr√≠culas dos alunos e rastreia seu progresso de forma individual e persistente durante a execu√ß√£o.
* **Video Streaming (Simula√ß√£o):** Permite adicionar conte√∫dos do tipo "V√≠deo" ou "PDF" e simula a abertura dos arquivos correspondentes.
* **Certification and Badging:** Ao concluir um curso, o aluno pode emitir um certificado de conclus√£o, que √© salvo como um arquivo `.txt`.
* **Interactive Learning Tools:** Instrutores podem criar quizzes interativos, que os alunos podem responder para testar seus conhecimentos.
* **Payment and Subscription Management (Simula√ß√£o):** O sistema simula um fluxo de pagamento para cursos pagos antes de liberar o acesso ao aluno.
* **Analytics and Reporting:** A plataforma fornece relat√≥rios detalhados sobre o desempenho dos alunos e o engajamento nos cursos, tanto para a vis√£o do aluno quanto para a do instrutor.
* **Discussion Forums and Chat:** A intera√ß√£o via FORUM foi implementada. A intera√ß√£o via CHAT est√° sendo trabalhada.

### N√£o Implementadas

* **Mobile Compatibility:** Sendo uma aplica√ß√£o de console, n√£o possui interface gr√°fica.
* **Discussion Forums and Chat:** A funcionalidade de intera√ß√£o entre usu√°rios via CHAT ainda n√£o foi implementada.

---

## Padr√µes de Projeto Implementados

Este projeto implementa **10 padr√µes de projeto** para demonstrar conceitos avan√ßados de **Projeto de Software** e melhorar a qualidade do c√≥digo. Cada padr√£o foi aplicado em contextos reais e pr√°ticos do sistema de E-Learning.

### üì¶ Criacionais (3/3)

#### **Singleton** - `src/singleton_metaclass.py`
- **Problema**: Garantir uma √∫nica inst√¢ncia de gerenciadores de conte√∫do para evitar duplica√ß√£o e desperd√≠cio de recursos
- **Solu√ß√£o**: Metaclasse que controla cria√ß√£o de inst√¢ncias √∫nicas
- **Implementa√ß√£o**: 
    - Metaclasse: `SingletonABCMeta` (para classes abstratas e seus filhos) e `SingletonMeta`(para as demais)
    - Singletons: `GerenciadorConteudo`, `GerenciadorExterno`, `GerenciadorTexto` e `GerenciadorQuestionario`
  - Client: `AddContentStrategy` em `src/menus/course_management_strategies.py`
- **Uso no projeto**: Quando um instrutor deseja adicionar conte√∫do aos seus cursos

#### **Factory Method** - `src/functions/instructor_functions/gerenciador_conteudo.py`
- **Problema**: Criar e adicionar diferentes tipos de conte√∫do (Texto, Externo, Questionario) aos cursos sem acoplar o c√≥digo
- **Solu√ß√£o**: Interface abstrata para cria√ß√£o de conte√∫do e cadeia de valida√ß√µes implementada pelas classes concretas
- **Implementa√ß√£o**: 
    - Creator abstrato: `GerenciadorConteudo` (obriga a implementa√ß√£o do `factory_method` e `validation_chain` e usa-os no `adicionar`, para inserir novos conte√∫dos)
    - Creator concretos: `GerenciadorExterno`, `GerenciadorTexto` e `GerenciadorQuestionario`
  - Client: `AddContentStrategy` em `src/menus/course_management_strategies.py`
- **Uso no projeto**: Quando um instrutor deseja adicionar conte√∫do aos seus cursos

#### **Builder** - `src/functions/instructor_functions/course_builder.py`
- **Problema**: Criar objetos `Course` complexos com muitos par√¢metros opcionais de forma clara
- **Solu√ß√£o**: Classe de construtor com m√©todos fluentes (retornam o pr√≥prio objeto) e valida√ß√£o dos dados m√≠nimos necess√°rios
- **Implementa√ß√£o**: 
    - Builder: `CourseBuilder`
    - Product: `Course`
    - Client (utiliza√ß√£o): `src/functions/instructor_functions/criar_curso.py`
- **Uso no projeto**: Quando um instrutor deseja criar um curso novo


### üîÑ Comportamentais (4/3)

#### **Strategy** - `src/menus/`
- **Problema**: Constru√ß√£o de menus com diversas op√ß√µes sem usar v√°rias condicionais
- **Solu√ß√£o**: Interface para padronizar as a√ß√µes dos menus e classe de contexto para adicionar a√ß√µes, exibir menu e executar estrat√©gia (a√ß√£o) escolhida
- **Implementa√ß√£o**: 
  - Context: `MenuManager`
  - Strategy abstrata (interface): `MenuActionStrategy`
  - Strategy concretas: Classes de estrat√©gia em `strategies.py`, `exit_strategy.py`, `course_management_strategies.py`, `instructor_strategies.py` e `student_strategies.py`
  - Client: `course_management_menu`, `student_menu` e `instructor_menu` em `src/menus/`
- **Uso no projeto**: Todos os menus do sistema

#### **State** - `src/models/forum.py`
- **Problema**: Comportamento de posts do f√≥rum muda drasticamente baseado no estado (Draft, Published, Closed)
- **Solu√ß√£o**: Interface para padronizar os estados do post, permitindo diferentes comportamentos para m√©todos de comportamento do post
- **Implementa√ß√£o**: 
  - Context: `ForumPost`
  - State: `PostState`
  - Concrete States: `Draft`, `Published`, `Closed`
  - Client: `adicionar_post` em `src/functions/student_functions/adicionar_post.py`
- **Uso no projeto**: Ao criar e interagir com posts do f√≥rum

#### **Chain of Responsibility** - `src/functions/instructor_functions/content_validation.py`
- **Problema**: Valida√ß√µes complexas de conte√∫do com m√∫ltiplas regras
- **Solu√ß√£o**: Cadeia de handlers (validadores) que processam sequencialmente at√© encontrar erro ou completar
- **Implementa√ß√£o**: 
  - Handler: `Handler`
  - Concrete Handlers: `TitleLengthValidation`, `FileFormatValidation`, etc.
  - Client: `GerenciadorExterno`, `GerenciadorTexto` e `GerenciadorQuestionario` em `src/functions/instructor_functions/gerenciador_conteudo.py`
- **Uso no projeto**: Quando um instrutor deseja adicionar conte√∫do aos seus cursos

#### **Template Method** - `src/functions/instructor_functions/gerenciador_conteudo.py` (intimamente relacionado com o Factory Method)
- **Problema**: Diferentes formas de criar conte√∫do e uma cadeia de valida√ß√£o correspondente
- **Solu√ß√£o**: Algoritmo padr√£o para adi√ß√£o de conte√∫dos, que utiliza passos vari√°veis para cada tipo de conte√∫do
- **Implementa√ß√£o**:
  - **AbstractClass**: `GerenciadorConteudo`, que declara os passos (`factory_method` e `validation_chain`) do algoritmo/template method (`adicionar`)
  - **ConcreteClasses**: `GerenciadorExterno`, `GerenciadorTexto` e `GerenciadorQuestionario`, que implementam os passos conforme o tipo de conte√∫do, mas n√£o sobrescrevem o algoritmo/template method
  - Client: `AddContentStrategy` em `src/menus/course_management_strategies.py`
- **Uso no projeto**: Quando um instrutor deseja adicionar conte√∫do aos seus cursos


### üîß Estruturais (3/3)

#### **Adapter** - `src/functions/instructor_functions/magic_validation.py`
- **Problema**: Biblioteca `python-magic` (usada para validar o tipo real de um arquivo) tem interface incompat√≠vel com a interface de validador do projeto (`Handler`) 
- **Solu√ß√£o**: Adaptador para usar a biblioteca externa com a interface esperada pelos validadores
- **Implementa√ß√£o**: 
  - Target: `Handler` (interface de validadores)
  - Adaptee: `SimpleMagicValidation` (classe criada para usar a biblioteca externa)
  - Adapter: `MagicPythonValidationAdapter` (conecta interfaces)
  - Client: m√©todo `validation_chain` de `GerenciadorExterno` em `src/functions/instructor_functions/gerenciador_conteudo.py`
- **Uso no projeto**: Quando um instrutor deseja adicionar conte√∫do externo aos seus cursos


#### **Decorator** - `src/logging/strategy_logging_decorator`
- **Problema**: Adicionar logs das op√ß√µes de menu seleciondas pelos usu√°rios sem alterar cada uma das classes de Strategy
- **Solu√ß√£o**: Criar um decorador para guardar o op√ß√£o selecionada pelo usu√°rio e depois executar a fun√ß√£o
- **Implementa√ß√£o**:
  - Component: `MenuActionStrategy` (interface para todas as op√ß√µes de menu)
  - Concrete Components: Todas as op√ß√µes de menu (classes que herdam `MenuActionStrategy`)
  - Base Decorator: `BaseDecoratorStrategy`
  - Concrete Decorator: `LoggingDecoratorStrategy`
  - Client: `course_management_menu`, `student_menu` e `instructor_menu` em `src/menus/`
- **Uso no projeto**: Quando o usu√°rio seleciona op√ß√µes que podem alterar os dados do sistema

#### **Facade** - `src/analytics`
- **Problema**: Subssistema de gera√ß√£o de relat√≥rios complexo
- **Solu√ß√£o**: Criar uma fachada que simplifique a intera√ß√£o com o subssistema
- **Implementa√ß√£o**:
  - Facade: `AnalyticsFacade`
  - Subssistemas complexos: `CourseAnalyticsCalculator`, `StudentProgressClaculator`, `RerportGenerator`
  - Client: `ReportStrategy` e `PerformanceStrategy` em `src/menus/course_management_strategies.py`
- **Uso no projeto**: Ao gerar relat√≥rios do curso e individuais (para aluno)

---

## Tratamento de Exce√ß√µes

A maioria das altera√ß√µes feitas no c√≥digo para tratar exce√ß√µes encontram-se no commit [61dc2dc](https://github.com/wyvianvalenca/E-Learning_Refactor/commit/61dc2dcaf6301149b74def112b3d6e2e887f3c56)

### Entradas lidas com `questionary`

A maioria das exce√ß√µes ocorre quando o usu√°rio insere uma entrada que difere do esperado pelo programa. Com o uso da biblioteca `questionary`, pude realizar um tratamento melhor das entradas do usu√°rio, pois ela permite inserir uma fun√ß√£o para verificar a entrada, impedindo a grava√ß√£o do dado at√© que tal fun√ß√£o retorne `True`.

Foram usadas fun√ß√µes como `is_positive_number`, `text_has_2words`, entre outras, para validar as entradas do usu√°rio. Todas as fun√ß√µes de valida√ß√£o est√£o em `src/validations.py`

Al√©m disso, outra a√ß√£o do usu√°rio que pode atrapalhar o fluxo do sistema √© o uso do Ctrl+C (interrup√ß√£o por teclado). Nesses casos, todas as fun√ß√µes de input da biblioteca `questionary` capturam essa entrada e retornan `None`. Para evitar que o valor nulo quebre qualquer l√≥gica da aplica√ß√£o, as vari√°veis que recebem as entradas do usu√°rio sempre s√£o verificadas para o valor nulo e, caso o contenham, a opera√ß√£o √© cancelada imediatamente.

#### Caso espec√≠fico: Gerenciadores de Conte√∫do em `src/functions/instructor_functions/gerenciador_conteudo.py`

Em rela√ß√£o ao tratamento da interrup√ß√£o do usu√°rio com Ctrl+C dentro da cria√ß√£o de conte√∫do, precisamos criar um erro personalizado, por causa da estrutura do padr√£o criacional FACTORY METHOD aplicado.

As fun√ß√µes de `template_method` de cada criador concreto capturam as informa√ß√µes do usu√°rio e fazem a cria√ß√£o de um novo conte√∫do. Nesse processo, o usu√°rio pode aplicar a interrup√ß√£o por teclado (Ctrl+C) em algum dos inputs, o que retornaria o valor `None` para o programa. Para evitar isso, criamos uma excess√£o `CancelledByYserError` para indicar que o usu√°rio deseja cancelar a opera√ß√£o. Ao pressionar Ctrl+C em qualquer um dos inputs desse processo, o sistema levanta a exce√ß√£o personalizada.

Para tratar tal comportamento inesperado, na fun√ß√£o `adicionar` (TEMPLATE METHOD), inserimos um bloco `try-except` que captura o erro personalizado e cancela toda a opera√ß√£o de cria√ß√£o e adi√ß√£o de conte√∫dos, evitando que erros apare√ßam para o usu√°rio.

### C√≥digo legado

Algumas das fun√ß√µes do sistema n√£o foram refatoradas e n√£o implementaram a biblioteca `questionary`, para tais, utilizamos blocos `try-except`.

#### `executar` em `src/functions/student_functions/plataforma_do_curso.py` (a partir da linha 43)

Como a entrada √© lida como texto e o programa espera um n√∫mero, tentamos fazer o casting de tipos, e, caso a entrada contenha letras ou s√≠mbolos, um erro `ValueError` √© levantado, o qual tratamos no bloco `except`.

Al√©m disso, tamb√©m tratamos a exce√ß√£o `KeyboardInterrupt`, cancelando a opera√ß√£o caso o usu√°rio pressione Ctrl+C.

#### `executar` em `src/functions/student_functions/inscrever_curso.py` (a partir da linha 15)

Tratamos a exce√ß√£o `KeyboardInterrupt`, cancelando a opera√ß√£o caso o usu√°rio pressione Ctrl+C.

#### `selecionar_curso_do_instrutor` em `src/functions/instructor_functions/dry.py` (a partir da linha 20)

Como a entrada √© lida como texto e o programa espera um n√∫mero, tentamos fazer o casting de tipos, e, caso a entrada contenha letras ou s√≠mbolos, um erro `ValueError` √© levantado, o qual tratamos no bloco `except`.

### Valida√ß√µes de arquivos com bilbioteca externa `python-magic` (`src/functions/instructor_functions/magic_validations.py`)

Para validar os conte√∫dos externos (arquivos) que s√£o inseridos no sistema, utilizamos uma biblioteca externa que verifica o tipo real do arquivo. Para evitar problemas com a inicializa√ß√£o dessa biblioteca, utilizamos excepts gen√©ricos, visto que n√£o conhecemos os erros espec√≠ficos que podem ser levantados.

Entrtanto, salvamos e imprimimos na tela todas as exce√ß√µes geradas pelas opera√ß√µes da biblioteca, para podermos identific√°-los e trat√°-los individualmente. Por√©m, at√© o momento, nenhum erro foi gerado pelo programa na valida√ß√£o de arquivos.

--

## Como Rodar o Projeto

A execu√ß√£o √© simples. Recomendamos o uso de Ambiente Virtual Python para instala√ß√£o dos pacotes externos.

### Clone o reposit√≥rio e v√° para a pasta do projeto
```bash
git clone https://github.com/wyvianvalenca/E-Learning_Refactor.git
cd E-Learning_Refactor
```

### Crie e ative um Ambiente Virtual
```
python3 -m venv venv
source venv/bin/activate
```

### Instale as dependencias do projeto
Esse projeto usa algumas bibliotecas externas:
- [rich](https://github.com/Textualize/rich)
- [questionary](https://github.com/tmbo/questionary)
- [python-magic](https://github.com/ahupp/python-magic)

```bash
pip install -r requirements.txt
```

### Rode o c√≥digo
```bash
python main.py

```

A aplica√ß√£o ser√° iniciada no console. Siga as instru√ß√µes na tela para navegar pelos menus.
